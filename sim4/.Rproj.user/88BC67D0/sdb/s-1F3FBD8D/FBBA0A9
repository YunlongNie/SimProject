{
    "contents" : "# r=c(4,6,9,12,15,18)\n# files = list.files(paste0(\"data/\",r,\"/\"))\n# \n# estT=do.call(rbind,lapply(r,function(r){\n#  files = list.files(paste0(\"data/\",r,\"/\"))\n# est=do.call(rbind,lapply(files,function(file)\n#  \n#  {\n#  load(paste0(\"data/\",r,\"/\",file))\n#  data.frame(est,g2=g2)\n# })\n# )\n# return(est)\n# }\n# ))\n\nnames = list.files(\"data/\")\n#files=names[grep(\"999\",names)]\nfiles=names\nestT=do.call(rbind,lapply(files,function(file)\n  \n{\n  \n  load(paste0(\"data/\",file))\n  data.frame(est,n=as.numeric(substr(file,6,9)))\n})\n)\n\nDelta$r =Delta$k*6\nrequire(plyr)\n\nestT=join(estT,Delta,by=\"r\")\n\nest.col = 1:8  # see head estT2 to make sure selected col number \n# dr      sold      pold      bold       snew      pnew       bnew\nres=as.data.frame(do.call(rbind,dlply(estT,.(k,n),function(x)\n  {\n  \n  do.call(c,c(sqrt(colMeans((x[,est.col] - x[\"Est\"][1,])^2)),Delta=x[\"Est\"][1,],unique(x[\"k\"]),unique(x[\"n\"])))\n}\n  )\n))\nnames(res)[1:(length(est.col)+1)] = c(\"D\",\"S0\",\"P\",\"B0\",\"S1\",\"B1\",\"S2\",\"B2\",\"N\")\n\nrequire(reshape2) \nres.melt=melt(res,id=c(\"k\",\"n\"))\nsubest = res.melt\nsubest$k = paste0(\"k=\",subest$k)\nsubest$n = paste0(\"n=\",subest$n)\n\nrequire(ggplot2)\nggplot.temp=ggplot(data=subest) +\n  facet_wrap(n~k,scales = \"free_y\")+theme(legend.position = \"none\") +\n  xlab(\"\")+ylab(\"RRMSE\")\nplotsave=ggplot.temp +\n  geom_text(aes(y=value,x=variable,label=variable,\n                color=factor(variable)),alpha=1,size=3,angle=15,\n            position = position_dodge(width=0.2))\n\n\nfigName= \"SimLast2\"\nggsave(plot=plotsave,filename=paste0(\"~/Dropbox/UBC/Thesis/\",figName,\".pdf\"),width=10,height=6)  \ncapName=\"RRMSE of estimates $\\\\widehat \\\\Delta_{S0},\\\\widehat \\\\Delta_{P},\n\\\\widehat \\\\Delta_{B0},\\\\widehat \\\\Delta_{S1},\n\\\\widehat \\\\Delta_{B1},\\\\widehat \\\\Delta_{S2},\n,\\\\widehat \\\\Delta_{B2}$ based on $\\\\rho=0.3, \\\\gamma_0 = \\\\text{logit(0.2)},\\\\gamma_1=\\\\gamma_2=1$ and $\\\\lambda_1=\\\\lambda_2=2$\nEach panel is simulated under different values of number of confouder blocks, $k$, and sample size, $n$. \"\nsource(\"~/Dropbox/UBC/Thesis/Simulation_Thesis/printFigure.R\")\nprint.figure(writeto=paste0(\"~/Dropbox/UBC/Thesis/\",figName,\".tex\"),filename=figName,placement=\"h\",\n             caption=capName,label=figName)\n#res.melt$variable\nrequire(ggplot2)\n#head(resMerge)\nsave(resMerge,file=\"resMerge.Rdata\")\n\nload(\"Datatemp/la0.Rdata\")\n\n\nnames(RMSEt) = c(\"S0\",\"B0\",\"P\",\"B1\",\"S1\",\"S2\",\"B2\",\"k\",\"n\")\nrequire(reshape2)\nsubest=melt(RMSEt,id=c(\"k\",\"n\"))\n\nhead(subset)\nsubest$k = paste0(\"k=\",subest$k)\nsubest$n = paste0(\"n=\",subset$n)\nrequire(ggplot2)\nggplot.temp=ggplot(data=subest) +\n  facet_wrap(n~k,scales = \"free_y\")+theme(legend.position = \"none\") +\n  xlab(\"\")+ylab(\"RRMSE\")\nplotsave=ggplot.temp +\n  geom_text(aes(y=value,x=variable,label=variable,\n                color=factor(variable)),alpha=1,size=3,angle=15,\n            position = position_dodge(width=0.2))\n\n\nfigName= \"SimLast1\"\nggsave(plot=plotsave,filename=paste0(\"~/Dropbox/UBC/Thesis/\",figName,\".pdf\"),width=10,height=6)  \ncapName=\"RRMSE of estimates $\\\\widehat \\\\Delta_{S0},\\\\widehat \\\\Delta_{P},\n\\\\widehat \\\\Delta_{B0},\\\\widehat \\\\Delta_{S1},\n\\\\widehat \\\\Delta_{B1},\\\\widehat \\\\Delta_{S2},\n,\\\\widehat \\\\Delta_{B2}$ based on $\\\\rho=0.3, \\\\gamma_0 = \\\\text{logit(0.2)},\\\\gamma_1=\\\\gamma_2=1$ and $\\\\lambda_1=\\\\lambda_2=0$\nEach panel is simulated under different values of number of confouder blocks, $k$, and sample size, $n$. \"\nsource(\"~/Dropbox/UBC/Thesis/Simulation_Thesis/printFigure.R\")\nprint.figure(writeto=paste0(\"~/Dropbox/UBC/Thesis/\",figName,\".tex\"),filename=figName,placement=\"h\",\n             caption=capName,label=figName)\n\n\nload(\"Datatemp/la2.Rdata\")\nnames(RMSEt) = c(\"S0\",\"B0\",\"P\",\"B1\",\"S1\",\"S2\",\"B2\",\"k\",\"n\")\nrequire(reshape2)\nsubest=melt(RMSEt,id=c(\"k\",\"n\"))\n\nhead(subset)\nsubest$k = paste0(\"k=\",subest$k)\nsubest$n = paste0(\"n=\",subset$n)\nrequire(ggplot2)\nggplot.temp=ggplot(data=subest) +\n  facet_wrap(n~k,scales = \"free_y\")+theme(legend.position = \"none\") +\n  xlab(\"\")+ylab(\"RRMSE\")\nplotsave=ggplot.temp +\n  geom_text(aes(y=value,x=variable,label=variable,\n                color=factor(variable)),alpha=1,size=3,angle=15,\n            position = position_dodge(width=0.2))\n\n\nfigName= \"SimLast2\"\nggsave(plot=plotsave,filename=paste0(\"~/Dropbox/UBC/Thesis/\",figName,\".pdf\"),width=10,height=6)  \ncapName=\"RRMSE of estimates $\\\\widehat \\\\Delta_{S0},\\\\widehat \\\\Delta_{P},\n\\\\widehat \\\\Delta_{B0},\\\\widehat \\\\Delta_{S1},\n\\\\widehat \\\\Delta_{B1},\\\\widehat \\\\Delta_{S2},\n,\\\\widehat \\\\Delta_{B2}$ based on $\\\\rho=0.3, \\\\gamma_0 = \\\\text{logit(0.2)},\\\\gamma_1=\\\\gamma_2=1$ and $\\\\lambda_1=\\\\lambda_2=2$\nEach panel is simulated under different values of number of confouder blocks, $k$, and sample size, $n$. \"\nsource(\"~/Dropbox/UBC/Thesis/Simulation_Thesis/printFigure.R\")\nprint.figure(writeto=paste0(\"~/Dropbox/UBC/Thesis/\",figName,\".tex\"),filename=figName,placement=\"h\",\n             caption=capName,label=figName)",
    "created" : 1374089124586.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "787560262",
    "id" : "FBBA0A9",
    "lastKnownWriteTime" : 1374090920,
    "path" : "~/Dropbox/UBC/Thesis/Simulation_Thesis/sim4/GetPlot.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}